.row
  .col-sm-5.col-sm-offset-4
    %h2 Sign up for new users
.row
  .col-sm-5.col-sm-offset-3
    = simple_form_for resource, as: resource_name, url: registration_path(resource_name), html: { class: "form-horizontal" } do |f|
      = devise_error_messages!
      .form-group
        %label.col-xs-1.control-label Email
        .col-xs-6
          = f.input :email, label: false, input_html: { class: "form-control" } 
          %span.help-block= f.error :name
      .form-group
        %label.col-xs-1.control-label Password
        .col-xs-6
          - if @validatable
            %em
              (#{@minimum_password_length} characters minimum)
          = f.input :password, label: false, input_html: { class: "form-control" } 
      .form-group
        %label.col-xs-1.control-label Confirm Password
        .col-xs-6
          = f.input :password_confirmation, label: false, input_html: { class: "form-control" } 
      .form-group
        %label.col-xs-1.control-label Roles
        .col-xs-6
          = f.input :role, label: false, collection: UserGroup.all, input_html: {class: "form-control"}, include_blank: true, value_method: :name
      .form-group
        %label.col-xs-1.control-label Modules
        .col-xs-6    
          / = f.input :resource_tokens, as: :check_boxes, label: false, collection: Resource.all, value_method: :name    
          - for resource in Resource.all
            = check_box_tag "user[resource_ids][]", resource.id, @user.resources.include?(resource)
            = h resource.name.camelize
      .row  
        .col-sm-4.col-sm-offset-3    
          .actions
            = f.submit "Sign up", :class => 'btn btn-success form-control'
        = render "devise/shared/links"