= stage.simple_fields_for :plan_production_statuses do |status|
  .plan-production-status-tag
    = status.input :plan_production_stage_id, as: :hidden
    = status.input :production_status_id, as: :hidden
    %label
      = "#{status.index + 1}. #{ProductionStatus.find(status.object.production_status_id).name}"
  .plan-production-status-remark-tag
    = status.input :remark, label: false, input_html: { class: "form-control" }
  
    = status.simple_fields_for :plan_zones do |zone|
      .list-zones
        %li{ class: "#{zone.index == 0 ? 'active' : ''}"}
          = link_to "#{Zone.find(zone.object.zone_id).name}", "#tab-zone-#{zone.index}", data: {toggle: 'tab'}
          = zone.input :zone_id, as: :hidden
          = zone.input :plan_production_status_id, as: :hidden
            
        = zone.simple_fields_for :plan_areas do |area|
          .plan-production-area-tag
            %h4 Area
            = area.input :plan_zone_id, as: :hidden
            = area.input :area_id, as: :hidden
            %p
              = area.object.area_id.nil? ? nil : Area.where(uuid: area.object.area_id).first.name

            = area.simple_fields_for :plan_blocks do |block|
              .plan-production-block-tag
                %p
                / = block.object.block_id
                = block.input :plan_area_id, as: :hidden
                %p
                  / = block.object.block_id.nil? ? nil : Block.where(uuid: block.object.block_id).first.name
                  = Block.find(block.object.block_id).name

                = block.input :block_id, as: :hidden
                = block.input :tree_amount